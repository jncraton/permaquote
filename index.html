<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title></title>
    <link rel="stylesheet" href="style.css" type="text/css" />
    <script src="main.js"></script>
  </head>

  <body>
    <header>
      <nav>
        <h1><a href="https://jncraton.github.io/permaquote/">permaquote</a></h1>
        <a
          href="javascript:Promise.resolve(new Blob([getSelection().toString()]).stream()).then(s=>s.pipeThrough(new CompressionStream('deflate-raw'))).then(s=>new Response(s)).then(res=>res.blob()).then(blob=>blob.arrayBuffer()).then(buf=>btoa(String.fromCharCode(...new Uint8Array(buf)))).then(ex=>{let u='https://jncraton.github.io/permaquote/#'+encodeURIComponent(document.location.href).replace(new%20RegExp('%253A','g'),':').replace(new%20RegExp('%252F','g'),'/')+';'+encodeURIComponent(document.title).replace(new%20RegExp('%2520','g'),'+')+';'+(new%20Date().toISOString().slice(0,10))+';'+ex;prompt('Sharable%20URL',u)});"
          >bookmarklet</a
        >
      </nav>
    </header>
    <form>
      <label>Title<input id="title" placeholder="Example Title" /></label>
      <label>Date<input id="date" type="date" /></label>
      <label
        >Excerpt
        <textarea id="text" spellcheck="false" placeholder="Quoted text…"></textarea>
      </label>
      <label>Source URL<input id="src" placeholder="https://example.com" /></label>
      <output id="len"></output>
      <label>Share URL<input id="share" readonly /></label>
    </form>

    <main></main>

    <template id="article">
      <h2 id="out_title"></h2>
      <p><a id="domain"></a></p>
      <p><time id="out_date"></time></p>
      <p>…</p>
      <blockquote id="out_text"></blockquote>
      <p>…</p>
      <details>
        <summary>About</summary>
        <p>
          The above quote was saved by a user who asserted that it was an excerpt from
          <a id="original"></a> on the web. If it is not currently accessible there, it may be
          <a id="internet_archive">available via the Internet Archive</a> or
          <a id="archive_today">available via archive.today</a>.
        </p>
      </details>
    </template>
  </body>
</html>
